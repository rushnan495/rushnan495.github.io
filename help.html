<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EDU SPORTS IT | Help Center</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{
  background:linear-gradient(-45deg,#0f172a,#1e293b,#0ea5a4,#38bdf8);
  background-size:400% 400%;
  animation:gradientMove 10s ease infinite;
  color:#fff;overflow-x:hidden;
}
@keyframes gradientMove{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}
nav{
  position:fixed;top:0;left:0;width:100%;
  background:#0f172a;display:flex;
  justify-content:space-between;align-items:center;
  padding:10px 15px;z-index:1000;
}
nav .logo{display:flex;align-items:center;font-weight:700;font-size:20px;color:#38bdf8;gap:8px;}
nav .logo img{width:34px;height:34px;border-radius:50%;object-fit:cover;border:2px solid #38bdf8;}
nav .nav-links{display:flex;gap:12px;}
nav .nav-links a{color:#fff;text-decoration:none;font-weight:500;padding:6px 10px;border-radius:6px;transition:0.3s;font-size:14px;}
nav .nav-links a:hover{background:#38bdf8;color:#0f172a;}
.menu-btn{display:none;color:#fff;font-size:28px;background:none;border:none;cursor:pointer;}
@media(max-width:900px){
  .menu-btn{display:block;}
  .nav-links{
    display:flex;flex-direction:column;
    position:fixed;top:50px;right:-220px;
    background:#0f172a;width:200px;border-radius:8px 0 0 8px;
    padding:12px;text-align:right;height:calc(100% - 50px);
    transition:right 0.3s ease;z-index:9999;gap:10px;
  }
  .nav-links.active{right:0;}
  .nav-links a{margin-bottom:10px;font-size:15px;}
}
section{margin-top:80px;padding:20px;text-align:center;}
h1{font-size:2.4rem;color:#38bdf8;margin-bottom:20px;}
p{color:#e2e8f0;font-size:15px;max-width:700px;margin:auto;margin-bottom:25px;}
.chatbox{background:rgba(30,41,59,0.85);border-radius:12px;max-width:700px;margin:auto;padding:20px;box-shadow:0 0 15px rgba(56,189,248,0.3);display:flex;flex-direction:column;}
.messages{height:320px;overflow-y:auto;text-align:left;margin-bottom:15px;display:flex;flex-direction:column;gap:10px;scroll-behavior:smooth;padding:8px;}
.msg{max-width:75%;padding:10px 15px;border-radius:10px;line-height:1.4;word-wrap:break-word;animation:fadeIn 0.3s ease;display:flex;align-items:flex-end;gap:8px;}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}
.bot{background:#0ea5a4;color:#0f172a;align-self:flex-start;border-bottom-left-radius:0;}
.user{background:#38bdf8;color:#0f172a;align-self:flex-end;border-bottom-right-radius:0;display:block;}
.admin{background:#ffd880;color:#0f172a;align-self:flex-start;border-bottom-left-radius:0;color:#000;}
.msg img{width:32px;height:32px;border-radius:50%;object-fit:cover;}
.input-area{display:flex;gap:8px;}
input{flex:1;padding:8px;border:none;border-radius:6px;font-size:14px;outline:none;}
button{padding:8px 14px;border:none;border-radius:6px;background:#38bdf8;color:#0f172a;font-weight:600;cursor:pointer;transition:0.3s;font-size:14px;}
button:hover{background:#0ea5a4;}
.footer{text-align:center;padding:20px;color:#94a3b8;margin-top:30px;}
.status-badge{font-size:13px;color:#94a3b8;margin-left:12px;}
</style>
</head>
<body>

<nav>
  <div class="logo">
    <img src="edu-sports-it.png" alt="Logo"><span>EDU SPORTS IT</span>
  </div>
  <button class="menu-btn" id="menuBtn">&#9776;</button>
  <div class="nav-links" id="navLinks">
    <a href="index.html">Home</a>
    <a href="courses.html">Courses</a>
    <a href="about.html">About</a>
    <a href="chat.html">World Chat</a>
    <a href="help.html">Help Center</a>
    <a href="review.html">Reviews</a>
    <a href="login.html" id="navLogin">Login</a>
    <a href="signup.html">Sign-Up</a>
    <a href="profile.html">Profile</a>
  </div>
</nav>

<section>
  <h1>Help Center</h1>
  <p>Welcome to the EDU SPORTS IT Help Center. Ask your questions below and our assistant bot will respond instantly</p>

  <div class="chatbox">
    <div class="messages" id="messages">
      <div class="msg bot"><img src="edu-sports-it.png" alt="Bot"><div class="bubble">ðŸ‘‹ Hello! I'm your AI assistant for the IT Club. Ask me anything about the club.</div></div>
    </div>

    <div style="display:flex;align-items:center;gap:10px;margin-top:8px;">
      <div class="status-badge" id="loginStatus">Checking login...</div>
    </div>

    <div class="input-area" style="margin-top:10px;">
      <input type="text" id="userInput" placeholder="Type your question...">
      <button id="sendBtn">Send</button>
    </div>
  </div>
</section>

<footer class="footer">Â© 2025 EDU SPORTS INFORMATION & TECHNOLOGY</footer>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// Firebase config â€” keep your own keys here (you already had these)
const firebaseConfig = {
  apiKey: "AIzaSyDR5yywOyYjCSnfTyLTcMUIz-hG80jZXU4",
  authDomain: "edu-sports-it.firebaseapp.com",
  databaseURL: "https://edu-sports-it-default-rtdb.firebaseio.com/",
  projectId: "edu-sports-it",
  storageBucket: "edu-sports-it.appspot.com",
  messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

const menuBtn = document.getElementById('menuBtn');
const navLinks = document.getElementById('navLinks');
menuBtn.addEventListener('click', ()=>navLinks.classList.toggle('active'));

const messages = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const loginStatus = document.getElementById('loginStatus');
const navLogin = document.getElementById('navLogin');

/* ---------- Behavior change you asked for ----------
   DO NOT redirect on page load.
   Only redirect to login.html when user clicks Send and is NOT logged in.
   Also show current login status in top area.
-----------------------------------------------------*/

/* show login status using Firebase Auth. If you use your own localStorage login,
   we check auth.currentUser first, otherwise fall back to localStorage 'currentUser'.
*/
function getCurrentUserInfo(){
  const u = auth.currentUser;
  if(u) return {uid: u.uid, name: u.displayName || u.email, email: u.email, avatar: u.photoURL || 'edu-sports-it.png', via: 'firebase'};
  // fallback to localStorage if you used that previously
  try {
    const local = JSON.parse(localStorage.getItem('currentUser'));
    if(local && local.uid) return {uid: local.uid, name: local.name || local.email || 'Guest', email: local.email || '', avatar: local.img || 'edu-sports-it.png', via:'local'};
  } catch(e){}
  return null;
}

/* update UI status (on load and on auth change) */
function refreshStatusUI(){
  const info = getCurrentUserInfo();
  if(info){
    loginStatus.textContent = 'Signed in as: ' + (info.name || info.email);
    navLogin.textContent = 'Sign out';
    navLogin.href = '#';
  } else {
    loginStatus.textContent = 'You are not signed in. Click Send to login.';
    navLogin.textContent = 'Login';
    navLogin.href = 'login.html';
  }
}

/* nav login click: if logged-in, sign out local (or firebase signOut) */
navLogin.addEventListener('click', async (e)=>{
  const info = getCurrentUserInfo();
  if(info){
    // sign out from firebase if using firebase auth
    try{ await auth.signOut(); } catch(e){ /* ignore */ }
    // also clear local storage currentUser if present
    localStorage.removeItem('currentUser');
    refreshStatusUI();
  } else {
    // let anchor navigate to login.html
  }
});

/* listen firebase auth state changes (if you're using firebase auth) */
auth.onAuthStateChanged(u=>{
  refreshStatusUI();
});

/* initial UI */
refreshStatusUI();

/* helper: append message to chat UI (no username for user messages as requested) */
function appendMessageLocal(m){
  const el = document.createElement('div');
  el.className = 'msg ' + (m.from === 'user' ? 'user' : (m.from === 'admin' ? 'admin' : 'bot'));
  const img = document.createElement('img');
  img.src = (m.from === 'admin') ? (m.adminAvatar || 'rushnan.jpg') : (m.userAvatar || 'edu-sports-it.png');
  img.alt = m.from === 'admin' ? 'Owner' : (m.userName || 'User');
  const bubble = document.createElement('div');
  bubble.className = 'bubble';
  bubble.textContent = m.text; // do NOT show user's name in UI per request
  el.appendChild(img);
  el.appendChild(bubble);
  messages.appendChild(el);
  messages.scrollTop = messages.scrollHeight;
}

/* load previous messages for this clientId if needed (clientId stored in localStorage) */
let clientId = localStorage.getItem('esit_clientId');
if(!clientId){ clientId = 'c_' + Math.random().toString(36).slice(2,12); localStorage.setItem('esit_clientId', clientId); }

/* listen live for admin replies and other messages for this clientId */
db.ref('messages').orderByChild('clientId').equalTo(clientId).on('child_added', snap=>{
  const m = snap.val();
  if(!m) return;
  // avoid duplicate display if we already appended locally using a temporary key
  if(window._esit_seen && window._esit_seen[snap.key]) return;
  window._esit_seen = window._esit_seen || {};
  window._esit_seen[snap.key] = true;
  appendMessageLocal(m);
});

/* send button behaviour: only redirect to login if user is NOT logged in when pressing Send.
   If logged-in, it will send normally.
*/
let sending = false;
sendBtn.addEventListener('click', handleSend);
userInput.addEventListener('keypress', e=>{ if(e.key === 'Enter') handleSend(); });

async function handleSend(){
  if(sending) return;
  const text = userInput.value.trim();
  if(!text) return;

  const userInfo = getCurrentUserInfo();
  if(!userInfo){
    // not logged in -> redirect to login page (user asked this behaviour)
    // optionally save draft or target page
    // store the typed message so after login you can show or prefill (optional)
    localStorage.setItem('pendingHelpMessage', text);
    window.location.href = 'login.html';
    return;
  }

  // logged-in -> send message
  sending = true;
  userInput.value = '';

  // build message object (save userName & email for admin, but DO NOT show name in UI)
  const msgObj = {
    text,
    from: 'user',
    clientId,
    userId: userInfo.uid || ('guest_' + Math.random().toString(36).slice(2,8)),
    userName: userInfo.name || userInfo.email || 'User',
    userEmail: userInfo.email || '',
    userAvatar: userInfo.avatar || 'edu-sports-it.png',
    timestamp: Date.now()
  };

  try{
    // append locally immediately (prevents waiting for DB) â€” we still don't show name in bubble
    appendMessageLocal(msgObj);

    // push to database
    const ref = db.ref('messages').push();
    await ref.set(msgObj);

    // update inbox metadata for admin (so admin can see name/email and unread)
    await db.ref('inbox/' + clientId).update({
      clientId,
      userName: msgObj.userName,
      userEmail: msgObj.userEmail,
      userAvatar: msgObj.userAvatar,
      lastMessage: msgObj.text,
      lastMessageAt: msgObj.timestamp,
      unread: true
    });

    // simple local KB check for immediate auto-answer
    const kb = [
      {q:"how to join it club", a:"Fill the online registration form and attend the orientation session."},
      {q:"available courses", a:"Programming, AI, Web Design, Cybersecurity, Networking, and more."},
      {q:"who is the club president", a:"The current president is Rushnan Khan."},
  { q: "what is it club", a: "The IT Club is a student community that explores technology, coding, and digital innovation through teamwork and creativity." },
  { q: "about it club", a: "Itâ€™s a platform for students who are passionate about technology, programming, and learning modern digital skills." },
  { q: "what does the club do", a: "The club organizes workshops, coding sessions, events, and tech talks to enhance membersâ€™ knowledge and practical skills." },
  { q: "what are the goals of the club", a: "Our main goals are to develop technical skills, teamwork, leadership, and problem-solving abilities among students." },
  { q: "who can join", a: "Any student interested in technology or digital innovation can join the IT Club." },
  { q: "is it open for everyone", a: "Yes, all students are welcome to join regardless of skill level." },
  { q: "is membership free", a: "No, membership requires 600 BDT. But courses are free to you for life-time." },
  { q: "who founded the club", a: "Rushnan Khan" },
  { q: "who is the club president", a: "Rushnan Khan" },
  { q: "who are the club volunteers", a: "Mubarrat, Saadman and Sohan are the most common figures of our IT club. Go to 'About' section to learn more about them." },
  { q: "who are the members", a: "Unfortunately, we can't provide members list or information right now." },
  { q: "how many members are there", a: "Unfortunately, we can't provide members list or information right now." },

  // Joining & registration
  { q: "how to join it club", a: "Contact with our Owner: Rushnan Khan, to join the IT club. Contact: +880 1966-090467 ." },
  { q: "how to become a member", a: "Contact with our Owner: Rushnan Khan, to join the IT club. Contact: +880 1966-090467 ." },
  { q: "requirements to join", a: "You just need interest in IT-related topics and a willingness to learn. No prior experience required." },
  { q: "can i join anytime", a: "Yes, but registration may close temporarily during major events or competitions." },
  { q: "join deadline", a: "Usually, registration deadlines are announced on the website or notice board." },

  // Events & competitions
  { q: "how to participate in events", a: "Event registration is usually done online through forms or the Events page." },
  { q: "upcoming events", a: "All upcoming events are listed on the website." },
  { q: "how to register for event", a: "Contact with our Owner: Rushnan Khan. Contact: +880 1966-090467 ." },
  { q: "how to be a volunteer", a: "Contact with our Owner: Rushnan Khan. Contact: +880 1966-090467 . Not many slots might be left." },

  // Rules & regulations
  { q: "club rules", a: "Members must maintain discipline, teamwork, and respect during all activities." },
  { q: "club dress code", a: "No strict dress code, but formal attire may be required during special events." },
  { q: "membership cancellation", a: "You can cancel membership by informing the club admin or filling a leave request form." },
  { q: "expulsion", a: "Members violating club rules or misusing resources may face temporary or permanent suspension." },
  { q: "rules for members", a: "Be respectful, participate actively, and follow event or meeting instructions." },
  { q: "what is not allowed", a: "Disrespectful behavior, spamming, or misuse of club equipment is strictly prohibited." },
  { q: "disallowed things", a: "Disrespectful behavior, spamming, or misuse of club equipment is strictly prohibited." },

  // Technical support
  { q: "website issue", a: "Try refreshing the page or clearing cache. If the issue remains, contact the website admin." },
  { q: "login problem", a: "Check your credentials and internet connection. If it persists, reset your password or contact admin." },
  { q: "password reset", a: "Use the â€˜Forgot Passwordâ€™ option or contact admin for manual reset." },
  { q: "form not working", a: "Make sure all fields are filled correctly. If still not working, reload the page or report the issue." },
  { q: "how to contact admin", a: "You can reach the admin through the â€˜Aboutâ€™ section of the website." },
  { q: "contact support", a: "Support is available via the official email or the Help Centre chat." },
  { q: "bug report", a: "Use the contact form or email to report bugs with details and screenshots." },
  { q: "feedback", a: "We appreciate your feedback! You can send it through the Feedback form or chat." },

  // Communication
  { q: "how to contact", a: "You can contact the club through the official website or email or directly contact with our owner." },
  { q: "club email", a: "currently, e-mail any volunteer or the owner." },
  { q: "contact number", a: "currently, contact any volunteer or the owner." },
  { q: "social media", a: "N/A" },
  { q: "club website", a: "Visit the official website for all information, updates, and registration links." },
  { q: "club updates", a: "All updates are posted in the Announcements section or shared through emails." },

  // Membership details
  { q: "membership fee", a: "Membership is us free, unless special paid courses are announced." },
  { q: "renew membership", a: "Membership is renewed automatically each academic year unless cancelled." },
  { q: "cancel membership", a: "You can cancel membership anytime by contacting the admin." },
  { q: "membership benefits", a: "Members gain access to workshops, contests, certificates, and skill development opportunities." },
  { q: "what do members get", a: "Members receive learning materials, participation opportunities, and experience certificates." },
  { q: "id card", a: "Some clubs issue digital or printed member ID cards for official events." },
  { q: "certificate", a: "Certificates are provided for active members or event participants." },
  { q: "membership confirmation", a: "Once your registration is approved, youâ€™ll receive an email or message confirmation." },

  // Miscellaneous
  { q: "club motto", a: "â€˜Learn, Create, and Innovate.â€™" },
  { q: "club vision", a: "To inspire students to become future-ready by embracing technology and creativity." },
  { q: "club mission", a: "To build a tech-savvy community that collaborates, learns, and leads innovation." },
  { q: "achievements", a: "The club has organized successful workshops, coding events, and student-led projects." },
  { q: "awards", a: "Awards are given to outstanding members and event winners each term." },
  { q: "partners", a: "currently unavailable" },
  { q: "sponsors", a: "currently unavailable" },
  { q: "donations", a: "Donations help improve club equipment, fund events, and support learning materials." },
  { q: "projects", a: "Members often collaborate on projects like websites, apps, or research papers." },
  { q: "team members", a: "currently unavailable" },
  { q: "leadership team", a: "currently unavailable" },
  { q: "advisors", a: "currently unavailable" },
  { q: "motherfucker", a: "ðŸ«µ" },
  { q: "son of a bitch", a: "ðŸ«µ" },
  { q: "stupid", a: "ðŸ«µ" },
  { q: "idiot", a: "ðŸ«µ" },
  { q: "noob", a: "ðŸ«µ" },
  { q: "chudina", a: "chudiyen na" },
  { q: "chudlam na", a: "chudiyen na" },
  { q: "chudi na", a: "chudiyen na" },
  { q: "cudi na", a: "cuidden na" },
  { q: "cudlam na", a: "cuidden na" },
  { q: "chodna", a: "ðŸ«µ" },
  { q: "madarchod", a: "ðŸ«µ" },
  { q: "bainchod", a: "ðŸ«µ" },
  { q: "bokachoda", a: "ðŸ«µ" },
  { q: "chodon", a: "ðŸ«µ" },
  { q: "codon", a: "ðŸ«µ" },
  { q: "bokacoda", a: "ðŸ«µ" },
  { q: "baincod", a: "ðŸ«µ" },
  { q: "madarcod", a: "ðŸ«µ" },
  { q: "khankir pola", a: "ðŸ«µ" },
  { q: "hey", a: "Hi there! How may I help you?" },
  { q: "hello", a: "Hi there! How may I help you?" },
  { q: "hi", a: "Hi there! How may I help you?" },
  { q: "fuck you", a: "Fuck you Too!" },
];

function cleanInput(input) {
  return input
    .toLowerCase()
    .replace(/[^\w\s]/gi, "") // remove punctuation/symbols
    .trim();
}

// Detect if input is in English
function isEnglish(text) {
  return /^[A-Za-z0-9\s]+$/.test(text);
}

// Main chatbot function
function getBotReply(userInput) {
  if (!isEnglish(userInput)) {
    return "English only ðŸ˜…";
  }

  const cleanedInput = cleanInput(userInput);

  // Match user input to known question
  const found = kb.find(item => cleanedInput.includes(item.q));

  return found
    ? found.a || "(No answer added yet)"
    : "Sorry, I didnâ€™t get that. Try rephrasing your question!";
}
    
    const l = text.toLowerCase();
    let kbAns = null;
    for(const k of kb) if(l.includes(k.q)) { kbAns = k.a; break; }

    if(kbAns){
      await db.ref('messages').push({
        text: kbAns, from: 'bot', clientId, userName: 'Bot', userAvatar: 'edu-sports-it.png', timestamp: Date.now()
      });
      await db.ref('inbox/' + clientId).update({ unread: false });
    } else {
      const fallback = "ðŸ¤– I don't know the answer yet. Our owner will reply soon when he was Active. so please connect with us!ðŸ˜ƒ";
      await db.ref('messages').push({
        text: fallback, from: 'bot', clientId, userName: 'Bot', userAvatar: 'edu-sports-it.png', timestamp: Date.now()
      });
      // add pending entry (optional)
      await db.ref('pendingMessages').push({
        question: text, clientId, userName: msgObj.userName, userEmail: msgObj.userEmail, userAvatar: msgObj.userAvatar, date: Date.now()
      });
    }
  }catch(err){
    console.error('send failed', err);
    alert('Message send failed.');
  } finally {
    sending = false;
  }
}

/* If user logged in and returned from login page with a pending message, auto-send it */
window.addEventListener('load', ()=>{
  const pending = localStorage.getItem('pendingHelpMessage');
  const userInfo = getCurrentUserInfo();
  if(pending && userInfo){
    // clear pending and set input then auto-send
    localStorage.removeItem('pendingHelpMessage');
    userInput.value = pending;
    // small delay to allow page to settle
    setTimeout(()=>{ handleSend(); }, 400);
  }
});
</script>
</body>
</html>






